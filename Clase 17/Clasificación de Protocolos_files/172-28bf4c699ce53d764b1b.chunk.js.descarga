(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[172],{1343:function(t,e,o){"use strict";o.r(e);var i,n=o(1238),s=o(39),c=o(2),r=o(37),p=function(t,e,o,i){var n,s=arguments.length,c=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(c=(s<3?n(c):s>3?n(e,o,c):n(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c},a=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let d=class extends c.f{removeColor(){this.$emit("remove-color")}updateColor(t){this.$emit("update-color",t)}backgroundClasses(t){switch(t){case"red":return"light"===this.colorScheme?["bg-scarlet-100","hover-hover:hover:bg-scarlet-200"]:["bg-scarlet-700","hover-hover:hover:bg-scarlet-600"];case"orange":return"light"===this.colorScheme?["bg-canary-100","hover-hover:hover:bg-canary-200"]:["bg-tangerine-700","hover-hover:hover:bg-tangerine-600"];case"green":return"light"===this.colorScheme?["bg-park-100","hover-hover:hover:bg-park-200"]:["bg-park-700","hover-hover:hover:bg-park-600"];case"blue":return"light"===this.colorScheme?["bg-oceanic-100","hover-hover:hover:bg-oceanic-200"]:["bg-oceanic-700","hover-hover:hover:bg-oceanic-600"];case"purple":return"light"===this.colorScheme?["bg-grape-100","hover-hover:hover:bg-grape-200"]:["bg-grape-700","hover-hover:hover:bg-grape-600"];default:return"light"===this.colorScheme?["bg-light-ui-200","hover-hover:hover:bg-light-ui-300"]:["bg-dark-ui-100","hover-hover:hover:bg-dark-ui-300"]}}ringClasses(t){if(this.selected===t)return["ring-2","light"===this.colorScheme?"ring-grape-500":"ring-canary-500"];let e;switch(t){case"red":e="light"===this.colorScheme?"ring-scarlet-200":"ring-scarlet-500";break;case"orange":e="light"===this.colorScheme?"ring-canary-200":"ring-tangerine-500";break;case"green":e="light"===this.colorScheme?"ring-park-200":"ring-park-500";break;case"blue":e="light"===this.colorScheme?"ring-oceanic-200":"ring-oceanic-500";break;case"purple":e="light"===this.colorScheme?"ring-grape-200":"ring-grape-500";break;default:e="light"===this.colorScheme?"ring-dark-ui-stroke":"ring-light-ui-stroke"}return["ring-1","ring-inset",e]}};p([Object(c.e)(),a("design:type",Array)],d.prototype,"colors",void 0),p([Object(c.e)(),a("design:type","function"===typeof(i="undefined"!==typeof s.PostColor&&s.PostColor)?i:Object)],d.prototype,"selected",void 0),p([Object(c.e)(),a("design:type",String)],d.prototype,"colorScheme",void 0),d=p([Object(c.a)({components:{OzIcon:r.default}})],d);var l,h,g=d,u=o(5),y=Object(u.a)(g,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("menu",{staticClass:"w-full flex items-stretch justify-between"},t._l([null].concat(t.colors),(function(e){return o("li",{key:e,class:["cursor-pointer w-5 h-5 rounded-xl transition-colors flex justify-center"].concat(t.ringClasses(e),t.backgroundClasses(e)),on:{click:function(o){return t.updateColor(e)},keydown:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.updateColor(e)}}},[t.selected===e?o("OzIcon",{class:["mt-1.125",{"text-grape-500":"light"===t.colorScheme,"text-canary-500":"dark"===t.colorScheme}],attrs:{name:"checkmark",size:12}}):t._e()],1)})),0)}),[],!1,null,null,null).exports,v=o(301),b=o(78),C=o(80),f=o(23),O=o(61),P=o(7),A=function(t,e,o,i){var n,s=arguments.length,c=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(c=(s<3?n(c):s>3?n(e,o,c):n(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c},j=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let k=class extends(Object(c.c)()){get anchorSelector(){return`#wish-${this.post.id} .post-actions-button`}get post(){return this.postEntitiesByCid[this.postCid]}get hasConnectionsToPost(){return this.hasPostUnderActionWithConnections}get isUserAuthored(){return this.isPostUnderActionUserAuthored}get canOpenInMapApp(){return!!this.isMap&&!!(this.post.location_point&&this.post.location_point.latitude&&this.post.location_point.longitude)}get postColor(){return this.post.color}get allPostColors(){return C.b}get actionList(){const t=[];return this.canEdit&&t.push({onClick:this.edit,iconName:"pencil_outline",text:this.__("Edit post")}),this.canChangeLocation&&t.push({onClick:this.changeLocation,iconName:"location_marker_outline",text:this.__("Change location")}),this.canConnect&&t.push({onClick:this.connect,iconName:"connect_outline",text:this.__("Connect to a post"),isRtlIcon:!0}),this.canDisconnect&&t.push({onClick:this.disconnect,iconName:"disconnect_outline",text:this.__("Disconnect from a post"),isRtlIcon:!0}),this.canChangeStackOrder&&(t.push({onClick:this.bringToFront,iconName:"send_to_front_outline",text:this.__("Bring to front")}),t.push({onClick:this.sendToBack,iconName:"send_to_back_outline",text:this.__("Send to back")})),this.canTransfer&&t.push({onClick:this.transfer,iconName:"transfer",text:this.__("Transfer post"),isRtlIcon:!0}),this.canCopy&&t.push({onClick:this.copy,iconName:"duplicate_outline",text:this.__("Copy post"),isRtlIcon:!0}),t.push({onClick:this.expand,iconName:"expand_post",text:this.__("Expand post"),isRtlIcon:!0}),this.canOpenInMapApp&&t.push({onClick:this.openInMapApp,iconName:"external_link_outline",text:this.isIOS?this.__("Open in Apple Maps"):this.__("Open in Google Maps"),isRtlIcon:!0}),this.canChangeCoverPost&&this.isPreviewPost&&t.push({onClick:this.unsetAsCover,iconName:"cover_outline",text:this.__("Unset as cover")}),this.canChangeCoverPost&&!this.isPreviewPost&&t.push({onClick:this.setAsCover,iconName:"cover_outline",text:this.__("Set as cover")}),this.canDelete&&t.push({onClick:this.askToDelete,iconName:"delete",text:this.__("Delete"),isDanger:!0}),t}cancel(){this.hidePostActionMenu()}removeColor(){this.cancel(),this.removePostColor({postCid:this.post.cid})}updateColor(t){this.cancel(),this.changePostColor({postCid:this.post.cid,newBgColor:t})}edit(){this.cancel(),this.startEditingPost({postCid:this.post.cid})}changeLocation(){this.cancel(),this.startPickingLocation({postCid:this.post.cid})}connect(){this.cancel(),this.post.id&&this.startConnection({postId:this.post.id})}disconnect(){this.cancel(),this.post.id&&this.startDisconnection({postId:this.post.id})}bringToFront(){this.cancel(),Object(O.a)("wishOrderArray")&&this.sortedPost({postCid:this.post.cid,to:"front"}),Object(O.a)("wishOrderArray")||this.sortedPost({postCid:this.post.cid,sortIndex:Object(v.e)()})}sendToBack(){this.cancel(),Object(O.a)("wishOrderArray")&&this.sortedPost({postCid:this.post.cid,to:"back"}),Object(O.a)("wishOrderArray")||this.sortedPost({postCid:this.post.cid,sortIndex:Object(v.c)()})}transfer(){Object(b.a)("Transfer Post Menu","open"),this.cancel(),this.startPostTransfer({transferPostCid:this.post.cid})}copy(){Object(b.a)("Copy Post Menu","open"),this.cancel(),this.startPostCopy({copyPostCid:this.post.cid})}expand(){this.cancel(),this.expandPost({postCid:this.post.cid})}openInMapApp(){this.cancel(),this.post.location_point&&Object(f.p)({lat:this.post.location_point.latitude,lng:this.post.location_point.longitude,name:this.post.location_name||""})}unsetAsCover(){this.cancel(),this.post.id&&this.unsetCoverPost({postId:this.post.id})}setAsCover(){this.cancel(),this.post.id&&this.setCoverPost({postId:this.post.id})}actuallyDelete(){this.cancel(),this.deletePost({postCid:this.post.cid})}askToDelete(){(Object(C.j)(this.post)||Object(C.i)(this.post)||window.confirm(this.__("Are you sure you want to delete this post? This cannot be undone!")))&&this.actuallyDelete()}};A([Object(c.e)({type:String,default:null,validator:t=>t.startsWith("c")}),j("design:type",String)],k.prototype,"postCid",void 0),A([P.b,j("design:type",String)],k.prototype,"dir",void 0),A([P.c,j("design:type",Boolean)],k.prototype,"isNativeMenu",void 0),A([P.c,j("design:type",Boolean)],k.prototype,"isDesktop",void 0),A([P.c,j("design:type",Boolean)],k.prototype,"isTablet",void 0),A([P.c,j("design:type",Boolean)],k.prototype,"isApp",void 0),A([P.c,j("design:type",Boolean)],k.prototype,"isIOS",void 0),A([P.c,j("design:type",Boolean)],k.prototype,"isFirefox",void 0),A([P.c,j("design:type","function"===typeof(l="undefined"!==typeof s.User&&s.User)?l:Object)],k.prototype,"user",void 0),A([P.b,j("design:type",Boolean)],k.prototype,"isMap",void 0),A([P.c,j("design:type",Boolean)],k.prototype,"isTouchable",void 0),A([P.b,j("design:type",String)],k.prototype,"colorScheme",void 0),A([Object(P.d)("browser").Getter,j("design:type",Boolean)],k.prototype,"isPhone",void 0),A([Object(P.d)("browser").Getter,j("design:type",Number)],k.prototype,"windowHeight",void 0),A([Object(P.d)("browser").Getter,j("design:type",Number)],k.prototype,"windowWidth",void 0),A([Object(P.d)("post").Getter,j("design:type","function"===typeof(h="undefined"!==typeof Record&&Record)?h:Object)],k.prototype,"postEntitiesByCid",void 0),A([Object(P.d)("post").Getter,j("design:type",Array)],k.prototype,"postsArray",void 0),A([Object(P.d)("postConnection").Getter,j("design:type",Array)],k.prototype,"connections",void 0),A([Object(P.d)("postAction").Getter,j("design:type",Boolean)],k.prototype,"hasPostUnderActionWithConnections",void 0),A([Object(P.d)("postAction").Getter,j("design:type",Boolean)],k.prototype,"isPostUnderActionUserAuthored",void 0),A([Object(P.d)("postAction").Getter,j("design:type",Array)],k.prototype,"postRightClickCoordinates",void 0),A([Object(P.d)("postAction").Getter("canEditPostUnderAction"),j("design:type",Boolean)],k.prototype,"canEdit",void 0),A([Object(P.d)("postAction").Getter("canDeletePostUnderAction"),j("design:type",Boolean)],k.prototype,"canDelete",void 0),A([Object(P.d)("postAction").Getter("canTransferPostUnderAction"),j("design:type",Boolean)],k.prototype,"canTransfer",void 0),A([Object(P.d)("postAction").Getter("canCopyPostUnderAction"),j("design:type",Boolean)],k.prototype,"canCopy",void 0),A([Object(P.d)("postAction").Getter("canConnectPostUnderAction"),j("design:type",Boolean)],k.prototype,"canConnect",void 0),A([Object(P.d)("postAction").Getter("canDisconnectPostUnderAction"),j("design:type",Boolean)],k.prototype,"canDisconnect",void 0),A([Object(P.d)("postAction").Getter("canChangePostStackOrder"),j("design:type",Boolean)],k.prototype,"canChangeStackOrder",void 0),A([Object(P.d)("postAction").Getter("canChangeCoverToPostUnderAction"),j("design:type",Boolean)],k.prototype,"canChangeCoverPost",void 0),A([Object(P.d)("postAction").Getter("canChangePostUnderActionLocation"),j("design:type",Boolean)],k.prototype,"canChangeLocation",void 0),A([Object(P.d)("postAction").Getter("isPostUnderActionPreviewPost"),j("design:type",Boolean)],k.prototype,"isPreviewPost",void 0),A([P.a,j("design:type",Function)],k.prototype,"unsetCoverPost",void 0),A([P.a,j("design:type",Function)],k.prototype,"setCoverPost",void 0),A([Object(P.d)("post").Action,j("design:type",Function)],k.prototype,"startEditingPost",void 0),A([Object(P.d)("post").Action,j("design:type",Function)],k.prototype,"sortedPost",void 0),A([Object(P.d)("post").Action,j("design:type",Function)],k.prototype,"deletePost",void 0),A([Object(P.d)("post").Action,j("design:type",Function)],k.prototype,"removePostColor",void 0),A([Object(P.d)("post").Action,j("design:type",Function)],k.prototype,"changePostColor",void 0),A([Object(P.d)("postAction").Action,j("design:type",Function)],k.prototype,"hidePostActionMenu",void 0),A([Object(P.d)("postAction").Action,j("design:type",Function)],k.prototype,"expandPost",void 0),A([Object(P.d)("postAction").Action,j("design:type",Function)],k.prototype,"startPostTransfer",void 0),A([Object(P.d)("postAction").Action,j("design:type",Function)],k.prototype,"startPostCopy",void 0),A([Object(P.d)("postConnection").Action,j("design:type",Function)],k.prototype,"startConnection",void 0),A([Object(P.d)("postConnection").Action,j("design:type",Function)],k.prototype,"startDisconnection",void 0),A([Object(P.d)("map").Action,j("design:type",Function)],k.prototype,"startPickingLocation",void 0),k=A([Object(c.a)({components:{SurfacePopover:n.a,SurfacePanelPostActionMenuColorSelector:y}})],k);var m=k,_=Object(u.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("SurfacePopover",{attrs:{"x-header":t.canEdit,"anchor-selector":t.anchorSelector,"action-list":t.actionList,"post-right-click-coordinates":t.postRightClickCoordinates,"x-popover-tip":!1,"header-height":36},on:{cancel:t.cancel},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",{staticClass:"px-4 pt-4"},[o("SurfacePanelPostActionMenuColorSelector",{attrs:{dir:t.dir,colors:t.allPostColors,"color-scheme":t.colorScheme,selected:t.postColor},on:{"remove-color":t.removeColor,"update-color":t.updateColor}})],1)]},proxy:!0}])})}),[],!1,null,null,null);e.default=_.exports}}]);
//# sourceMappingURL=172-28bf4c699ce53d764b1b.chunk.js.map